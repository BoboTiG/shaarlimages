var linearPartitionTable=function(e,t){"use strict";var n,r,i,s=e.length,o=[],u=[],a=[],f=[],l={computed:Infinity,value:Infinity};for(n=0;n<s;n+=1){o=[];for(r=0;r<t;r+=1){o.push(0)}u.push(o)}for(n=0;n<s-1;n+=1){o=[];for(r=0;r<t-1;r+=1){o.push(0)}a.push(o)}for(n=0;n<s;n+=1){u[n][0]=e[n]+(n?u[n-1][0]:0)}for(n=0;n<t;n+=1){u[0][n]=e[0]}for(n=1;n<s;n+=1){for(r=1;r<t;r+=1){f=[];for(i=0;i<n;i+=1){f.push([Math.max(u[i][r-1],u[n][0]-u[i][0]),i])}l={computed:Infinity,value:Infinity};for(i=0;i<n;i+=1){if(f[i][0]<l.computed){l={value:f[i],computed:f[i][0]}}}u[n][r]=l.value[0];a[n-1][r-1]=l.value[1]}}return[u,a]};var linearPartition=function(e,t){"use strict";var n,r=e.length-1,i,s,o=[],u=[],a=[];if(t<1){return u}if(t>r){for(n=0;n<=r;n+=1){u.push([e[n]])}return u}i=linearPartitionTable(e,t);s=i[1];t-=2;while(t>=0){a=[];for(n=s[r-1][t]+1;n<=r;n+=1){a.push(e[n])}a=[a];o=a.concat(o);r=s[r-1][t];t-=1}for(n=0;n<=r;n+=1){u.push(e[n])}u=[u];return u.concat(o)};var linearPartitionFitPics=function(e,t){"use strict";t.border=t.border||0;t.spacing=t.spacing||0;var n,r,i,s=0,o=0,u=0,a,f,l,c,h,p=[],d=[];for(n=0,i=e.length;n<i;n+=1){e[n].aspectRatio=e[n].width/e[n].height;o+=e[n].aspectRatio*t.preferedImageHeight}f=Math.round(o/t.containerWidth);if(f<=1){for(n=0,i=e.length;n<i;n+=1){e[n].width=parseInt(t.preferedImageHeight*e[n].aspectRatio,10);e[n].height=t.preferedImageHeight}}else{for(n=0,i=e.length;n<i;n+=1){p.push(parseInt(e[n].aspectRatio*100,10))}a=linearPartition(p,f);for(n in a){l=a[n];c=t.containerWidth;u=0;d=[];i=l.length;if(t.spacing){c-=t.spacing*(i-1)}for(r=0;r<i;r+=1){d.push(e[s]);s+=1}for(r=0,i=d.length;r<i;r+=1){u+=d[r].aspectRatio}for(r=0;r<i;r+=1){h=d[r];h.width=parseInt(c/u*h.aspectRatio,10);h.height=parseInt(c/u,10);if(r===i-1){h.last=true}}}}return e};linear_me=function(){"use strict";var e,t=document.getElementById("image-container").getElementsByTagName("figure"),n,r=t.length,i=[];if(i.length===0){var s=new Image;for(e=0;e<r;e+=1){s.src=t[e].getElementsByTagName("img")[0].src;i.push({originalImage:t[e].getElementsByTagName("img")[0],width:s.width,height:s.height})}}var o=linearPartitionFitPics(i,{containerWidth:document.documentElement.clientWidth-16,preferedImageHeight:parseInt(document.documentElement.clientHeight/2,10),spacing:4});for(e=0,r=i.length;e<r;e+=1){n=i[e];n.originalImage.height=o[e].height;n.originalImage.width=o[e].width;if(!n.last){t[e].style.marginRight="4px"}}};var parse_query_string=function(){"use strict";var e=window.location.search,t={};e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,r,i){t[n]=i});return t};var params=parse_query_string();if(params.i){var x=document.documentElement.clientWidth,y=document.documentElement.clientHeight,img=document.getElementsByTagName("figure")[0].getElementsByTagName("img")[0],ix=img.offsetWidth,iy=img.offsetHeight,need_change=ix>=x||iy>=y;if(need_change){if(ix>=x){img.style.borderLeft="none";img.style.borderRight="none"}if(iy>=y){img.style.borderTop="none";img.style.borderBottom="none"}}}else{window.onload=linear_me;window.onresize=linear_me}
